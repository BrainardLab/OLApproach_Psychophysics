---
title: "MeLMSens pilot data analysis"
author: "Joris Vincent"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  pdf_document:
    toc: no
  html_notebook:
    number_sections: yes
    toc: yes
  html_document:
    toc: yes
---
```{r setup, echo=FALSE, message=FALSE}
library(tidyverse)
library(knitr)
```
```{r munge, echo=FALSE}
results_all = read_csv('../../data/processed/results_all.csv',col_types=cols())
results_all = results_all %>%
  separate(filename,into=c("tmp1","participant","session","tmp2"),sep="-") %>%
  select(-tmp1, -tmp2)

results_all = results_all %>%
  separate(condition,into=c("axis","adaptation"),sep="_") %>%
  mutate(adaptation=factor(.$adaptation,levels=c('low','high'))) %>%
  mutate(contrast_LMS=contrast_L)
```

# Summary statistics
```{r summary_statistics, tidy=TRUE, echo=FALSE}
results_all %>%
  group_by(axis,session,adaptation) %>%
  summarise(contrast=median(contrast_LMS*100)) %>%
  spread(adaptation,contrast) %>%
  kable(.,digits = 2)
```

# Plot
```{r plot_line_condition_per_session, echo=FALSE}
results_all %>%
  ggplot() +
  aes(adaptation, contrast_LMS, group=interaction(session,axis),color=axis) +
  geom_line()
```